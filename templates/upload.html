<!DOCTYPE html>
<html>
<head>
	<link rel="stylesheet" href="../static/uploads/css/main.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
</head>
<body>
<!-- introduction page -->
<div class="bg">
	<div class = "text-container1"> 
		<h1 class = bgh1>Art Classifier</h1>
		<p class = bgp> Upload an art image to determine the style, time period, <br>or author using this simple classifier! (accepts .png, .jpg, .jpeg)</p> 
		<button class=button type = "button" onclick = "bottum()"> Begin </button> <!-- autoscrolls down to second page-->
		<!-- TODO: add an about us button that either redirects to a new page or has a hover feature -->
	</div>
</div>

<div id="begin" class="bg2">
	<div class="text-container">
		<div class="left">
			<h3 class = "lineheight"> 1. Upload an image </h3>
			<p class = "lineheight"> (accepts .jpg, .jpeg, .png) </p>
			<button class="button" type="button" onclick="$('.file-upload-input').trigger( 'click' )">Add Image</button>
			<div class="file-upload">
				<div class="image-upload-wrap">
				  <input class="file-upload-input" type='file' onchange="readURL(this);" accept="image/*" />
				  <div class="drag-text">
					<h3>Drag and drop a file or select add Image</h3>
				  </div>
				</div>
				<div class="file-upload-content">
				  <img class="file-upload-image" src="#" alt="your image" />
				  <div class="image-title-wrap">
					<button type="button" onclick="removeUpload()" class="remove-image">Remove <span class="image-title">Uploaded Image</span></button>
				  </div>
				</div>
			</div>
		</div>
		<div class="middle">
			<h3 class = "lineheight"> 2. Choose your classifier </h3>
			<p class = "lineheight"> Hover over for more info</p>
			<button class="button" type = "button" > More info </button> <br>
			<div class="button-container">
				<!-- placeholder buttons, no functionality yet-->
				<!-- TODO: find out of to keep these button highlighted when pressing GO button-->
				<button class="button" type = "button" > Artist </button> <br>
				<button class="button" type = "button" > Style </button> <br>
				<button class="button" type = "button" > Time </button> <br>
			</div>
		</div>
		<div class="right">
			<h3 class = "lineheight"> 3. Classify </h3>	
			<p class = "lineheight"> Press GO to classify!</p>
			<!-- TODO: error handling (press GO without uploaded file) -->
			<button class="button" type = "button" onclick = "classify()"> GO </button>
			<div class = "crect">
			{% if nofile %}
			<p id = "nofile" style = "display: none;"> Please upload a file first </p>
			{% endif %}
			{% if classify %}
			<!-- passes in model predictions and waits for GO button to be clicked to display -->
			<!-- TODO: stylize output predictions -->
			<p id = "classify" style = "display:none;"> Style: {{ classify }} </p>
			{% endif %}</div>
			<!-- TODO: add new button that scrolls to "view similar images" and decide what scroll type to use-->
		</div>
	</div>
</div>
</html>
</body>

<script>
function bottum() {
	document.getElementById('begin').scrollIntoView({behavior: "smooth"});
};

function classify() {
	document.getElementById('classify').style.display = '';
	document.getElementById('nofile').style.display = '';
}

function readURL(input) {
	if (input.files && input.files[0]) {

    var reader = new FileReader();

    reader.onload = function(e) {
      $('.image-upload-wrap').hide();

      $('.file-upload-image').attr('src', e.target.result);
      $('.file-upload-content').show();

      $('.image-title').html(input.files[0].name);
    };

    reader.readAsDataURL(input.files[0]);

  } else {
    removeUpload();
  }
}

function removeUpload() {
  $('.file-upload-input').replaceWith($('.file-upload-input').clone());
  $('.file-upload-content').hide();
  $('.image-upload-wrap').show();
}
$('.image-upload-wrap').bind('dragover', function () {
        $('.image-upload-wrap').addClass('image-dropping');
    });
    $('.image-upload-wrap').bind('dragleave', function () {
        $('.image-upload-wrap').removeClass('image-dropping');
});
</script>

{% if scroll %}
<script>
	// if an image has been uploaded by the user, render template starting on second page instead of first
	document.getElementById('begin').scrollIntoView();
</script>
{% endif %}